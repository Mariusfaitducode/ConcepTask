<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="goBackTodo()" class="back-button">
        <ion-icon name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Nouvelle équipe</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" *ngIf="team">
  <!-- <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Équipe</ion-title>
    </ion-toolbar>
  </ion-header> -->

  <!-- <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-input [(ngModel)]="teamName" placeholder="Nom de l'équipe"></ion-input>
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-img [src]="teamImage" alt="Image de l'équipe"></ion-img>
      <ion-button expand="block" (click)="changeTeamImage()">Changer l'image</ion-button>
    </ion-card-content>
  </ion-card> -->


  <div class="team-header">

    <div class="team-image">

      <img [src]="team.image" width="100px" height="100px" alt="" >

      
    </div>


    <div class="team-name">

      <!-- <ion-item> -->
        <ion-input [(ngModel)]="team!.name" placeholder="Nom de l'équipe"></ion-input>
      <!-- </ion-item> -->

      <input type="file" accept="image/*" (change)="fileUpload($event)" />

    </div>

  </div>

  <ion-searchbar [(ngModel)]="searchTerm" (ionInput)="searchMembers()" placeholder="Rechercher un membre"></ion-searchbar>


  <ion-list>
    <ion-item *ngFor="let user of searchMembersResult">
      <ion-avatar slot="start">
        <img [src]="user.avatar" alt="Photo de profil">
      </ion-avatar>
      <ion-label>
        <h2>{{ user.pseudo }}</h2>
        <!-- <p>{{ member.role }}</p> -->
      </ion-label>

      <ion-button *ngIf="!isMemberAlreadyInTeam(user.uid)" (click)="sendInvitationToUser(user.uid)">Ajouter</ion-button>
      
    </ion-item>
  </ion-list>


  <ion-list>
    <ion-item *ngFor="let member of teamUsers">
      <ion-avatar slot="start">
        <img [src]="member.avatar" alt="Photo de profil">
      </ion-avatar>
      <ion-label>
        <h2>{{ member.pseudo }}</h2>
        <!-- <p>{{ member.role }}</p> -->
      </ion-label>
    </ion-item>
  </ion-list>

  <!-- <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="addNewMember()">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab> -->
</ion-content>



<ion-fab vertical="bottom" horizontal="end" slot="fixed">
  <ion-fab-button [disabled]="!canSaveOrUpdateTeam()" (click)="saveNewTeam()">
    <ion-icon name="checkmark-outline" ></ion-icon>
  </ion-fab-button>
</ion-fab>