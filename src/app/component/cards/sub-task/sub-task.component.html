
<ion-card [style.margin-right]="marginLeft()">

  <div cdkDrag [cdkDragData]="subTask">
    <ion-card-content 
      (click)="clickSubTask()" (press)="developSubTaskPressed($event)"
      [ngClass]="{isDone: subTask.isDone, passed : passedDate()}">

    <!-- <ion-icon name="menu-outline"></ion-icon> -->

    <div class="main-content">
      <div class="left-card">
        <ion-reorder cdkDragHandle></ion-reorder>
  
        <div class="task-title">
          <ion-card-title >{{subTask.title}}</ion-card-title>
        </div>
      </div>
  
      <div class="todo-page">

        <div *ngIf="this.subTask.config.subtasks && this.subTask.list.length !== 0" class="advancement">
            {{numberOfDoneSubTask()}}/{{this.subTask.list.length}}
        </div>  

        <div *ngIf="subTask.isDone" class="isDone-icon">
          <ion-icon name="checkmark-outline" color="success"></ion-icon>
        </div>  
        

        <div *ngIf="this.subTask.config.subtasks && (this.subTask.list.length !== 0 || page === 'add')" class="develop-task" (click)="developSubTask($event)">
          <div  *ngIf="!this.subTask.developped">
            <ion-icon name="chevron-down-outline" ></ion-icon>
          </div>
          <div *ngIf="this.subTask.developped">
            <ion-icon name="chevron-up-outline"></ion-icon>
          </div>
        </div>
      </div>
    </div>

  </ion-card-content>
  </div>
  
  <div>
    <div>
      <ion-list  class="sub-sub-task" *ngIf="this.subTask.config.subtasks && this.subTask.developped" [style.background-color]="backgroundColor()">

        <div *ngIf="page === 'add'">
          <app-button-add-sub-task [modalConfig]="openModal" [parentTask]="subTask"></app-button-add-sub-task>
  
        </div>
        
  
        <div *ngFor="let sub of subTask.list; let id = index" >
      
          <app-sub-task 
          [todos]="todos" [parentTask]="subTask" [subTask]="sub" [index]="id" [page]="page" [level]="level + 1" [openModal]="openModal"></app-sub-task>
        
        </div>
      
      </ion-list>
    </div>

  </div>
    
   
  
  
 
</ion-card>






